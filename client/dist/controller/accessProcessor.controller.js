sap.ui.define(["oft/fiori/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","oft/fiori/models/formatter","sap/ui/model/Filter"],function(t,e,a,o,r){"use strict";return t.extend("oft.fiori.controller.accessProcessor",{formatter:o,onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.attachRoutePatternMatched(this.herculis,this);var t=this.getModel("local").getProperty("/CurrentUser");if(t){var e=this.getModel("local").oData.AppUsers[t].UserName;this.getView().byId("idUser").setText(e)}},onSearchNo:function(t){var e=t.getSource().getSelectedKey();var a=this.getView().byId("idRecent");var r=this;$.post("/loadBatchHolders",{CourseId:e}).done(function(t,e){var s=new sap.ui.model.json.JSONModel;s.setData({data:t});a.setModel(s);r.getView().byId("titletext2").setText("Count : "+t.length);a.bindAggregation("items",{path:"/data",template:new sap.m.StandardListItem({highlight:{path:"partialPayment",formatter:o.formatRowHighlight},title:"{gmailid} - {name} - {country} - {defaulter}",description:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDates},icon:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDatesIcon},iconColor:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDatesIconColor}})})}).fail(function(t,e,a){sap.m.MessageBox.error(t.responseText)})},onFilters:function(t){var e=this.getView().byId("courseSel").getSelectedKey();var a=this;var r=this.getView().byId("idRecent");$.post("/loadBatchHoldersLink",{CourseId:e}).done(function(t,e){var s=new sap.ui.model.json.JSONModel;s.setData({data:t});a.getView().byId("titletext2").setText("Count : "+t.length);r.setModel(s);r.bindAggregation("items",{path:"/data",template:new sap.m.StandardListItem({highlight:{path:"partialPayment",formatter:o.formatRowHighlight},title:"{gmailid} - {name} - {country} - {defaulter}",description:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDates},icon:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDatesIcon},iconColor:{parts:[{path:"startDate"},{path:"endDate"}],formatter:o.getDatesIconColor}})})}).fail(function(t,e,a){sap.m.MessageBox.error(t.responseText)})},onShooter:function(t){var e=this.getView().byId("courseSel").getSelectedKey();var a=this.getView().byId("idRecent");$.post("/refreshAccess",{CourseId:e}).done(function(t,e){sap.m.MessageBox("Done")}).fail(function(t,e,a){sap.m.MessageBox.error(t.responseText)})},onBack:function(){sap.ui.getCore().byId("idApp").to("idView1")},herculis:function(t){if(t.getParameter("name")!=="accessProcessor"){return}}})});