var courseGUID;var customerGUID;var vEmail;var CourseFee;sap.ui.define(["oft/fiori/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","oft/fiori/models/formatter","sap/ui/model/Filter","sap/m/Token","sap/ui/model/FilterOperator"],function(e,t,s,i,a,r,o){"use strict";return e.extend("oft.fiori.controller.dumps",{formatter:i,onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.totalCount=0;var e=this.getModel("local").getProperty("/CurrentUser");if(e){var t=this.getModel("local").oData.AppUsers[e].UserName}t="Hey "+t;this.getView().byId("idUser").setText(t);this.UserRole=this.getOwnerComponent().getModel("local").getProperty("/Role");var s=this.getOwnerComponent().getModel();var i=new sap.ui.model.json.JSONModel;s.read("/Students",{success:function(e,t){i.setData(e)},error:function(e){}});var a=this.getOwnerComponent().getModel();a.read("/Courses",{success:function(e,t){i.setData(e)},error:function(e){}});this.oRouter.attachRoutePatternMatched(this.herculis,this)},onBack:function(){sap.ui.getCore().byId("idApp").to("idView1")},siteLink:"",eMailId:"",onSaveDump:function(){var e=this;var t=this.getView().getModel("local").getProperty("/dump");var s=Object.keys(t);for(var i=0;i<s.length;i++){if(t[s[i]]===null){return}}e.getView().setBusy(true);this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/Dumps","POST",{},t,this).then(function(t){e.getView().setBusy(false);sap.m.MessageToast.show("dump Saved successfully");this.createDumpPopup.close()}).catch(function(t){e.getView().setBusy(false);sap.m.MessageToast.show("dump Saving failed "+t.responseText)})},onSaveDumpSold:function(){var e=this;var t=this.getView().getModel("local").getProperty("/dumpSold");e.getView().setBusy(true);this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/DumpSolds","POST",{},t,this).then(function(t){e.getView().setBusy(false);sap.m.MessageToast.show("dump Saved successfully");if(e.getView().byId("idRecent").getBinding("items")){e.getView().byId("idRecent").getBinding("items").refresh()}}).catch(function(t){e.getView().setBusy(false);sap.m.MessageToast.show("dump sold Saving failed "+t.responseText)})},onDumpChange:function(e){var t=e.getParameter("selectedItem").getBindingContext().getObject();this.getView().getModel("local").setProperty("/dumpSold/fees",t.fees);this.getView().getModel("local").setProperty("/dumpSold/currency",t.currency);this.getView().getModel("local").setProperty("/dumpSold/source",t.Link)},oSuppPopup:null,destoryDialog:function(){this.oSuppPopup.destroy();this.oSuppPopup=null},onDeleteDumpSold:function(e){var s=this;t.confirm("Do you want to delete the selected records?",function(e){if(e=="OK"){var t=s.getView().byId("idRecent").getSelectedContexts();for(var i=0;i<t["length"];i++){s.ODataHelper.callOData(s.getOwnerComponent().getModel(),t[i].sPath,"DELETE",{},{},s).then(function(e){sap.m.MessageToast.show("Deleted succesfully")}).catch(function(e){s.getView().setBusy(false);s.oPopover=s.getErrorMessage(e);s.getView().setBusy(false)})}}},"Confirmation")},onPayDateChange:function(e){var t=e.getSource().getValue();var s=t.split(".");var i=new Date(s[2],s[1]-1,s[0]);var a=new Date(s[2],s[1]-1,s[0]);a.setHours(0,0,0,0);var r=new sap.ui.model.Sorter("CreatedOn",true);var o=new sap.ui.model.Filter("Date","GE",a);var l=this.getView().byId("idRecent");var n=l.getItems();l.getBinding("items").filter(o);l.getBinding("items").sort(r)},herculis:function(e){if(e.getParameter("name")!=="newreg"){return}var t=new Date;t.setHours(0,0,0,0);var s=new sap.ui.model.Sorter("CreatedOn",true);var i=this.getView().byId("idRecent");var a=i.getItems();var r=new sap.ui.model.Filter("PaymentDate","GE",t);i.getBinding("items").filter(r);i.getBinding("items").sort(s);this.getView().getModel("local").setProperty("/newRegistration/StartDate",this.formatter.getFormattedDate(0));this.getView().getModel("local").setProperty("/newRegistration/PaymentDate",this.formatter.getFormattedDate(0));this.getView().getModel("local").setProperty("/newRegistration/EndDate",this.formatter.getFormattedDate(8));this.getView().getModel("local").setProperty("/newRegistration/PaymentDueDate",this.formatter.getFormattedDate(1));this.getView().getModel("local").setProperty("/newRegistration/StudentId",null);this.getView().getModel("local").setProperty("/newRegistration/CourseId",null);this.getView().getModel("local").setProperty("/newRegistration/Mode","L");this.getView().getModel("local").setProperty("/newRegistration/PaymentMode","IMPS");this.getView().getModel("local").setProperty("/newRegistration/AccountName",null);this.getView().getModel("local").setProperty("/newRegistration/Amount",15e3);this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",0);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",false);this.getView().getModel("local").setProperty("/newRegistration/Reference",null);this.getView().getModel("local").setProperty("/newRegistration/Extra2",null);this.getView().getModel("local").setProperty("/newRegistration/Waiver",false);this.getView().getModel("local").setProperty("/newRegistration/Waiver",false);this.getView().getModel("local").setProperty("/newRegistration/Waiver",false);this.getView().getModel("local").setProperty("/newCustomer/GmailId",null);this.getView().getModel("local").setProperty("/newCustomer/Name",null);this.getView().getModel("local").setProperty("/newCustomer/Country","IN");this.getView().getModel("local").setProperty("/newCustomer/ContactNo",null);this.getView().getModel("local").setProperty("/newCustomer/OtherEmail1",null);this.getView().getModel("local").setProperty("/newCustomer/OtherEmail2",null);this.getView().getModel("local").setProperty("/newCustomer/Skills",null);this.getView().getModel("local").setProperty("/newCustomer/Star",false);this.getView().getModel("local").setProperty("/newCustomer/Defaulter",false)},oSuppPopup:null,onCustomer:function(){if(!this.oSuppPopup){this.oSuppPopup=new sap.ui.xmlfragment("oft.fiori.fragments.newCustomer",this);sap.ui.getCore().getMessageManager().registerObject(this.oSuppPopup,true);this.getView().addDependent(this.oSuppPopup);this.oSuppPopup.setTitle("New Customer")}this.getView().getModel("local").setProperty("/newCustomer/GmailId",null);this.getView().getModel("local").setProperty("/newCustomer/Name",null);this.getView().getModel("local").setProperty("/newCustomer/Country","IN");this.getView().getModel("local").setProperty("/newCustomer/ContactNo",null);this.getView().getModel("local").setProperty("/newCustomer/OtherEmail1",null);this.getView().getModel("local").setProperty("/newCustomer/OtherEmail2",null);this.getView().getModel("local").setProperty("/newCustomer/Skills",null);this.getView().getModel("local").setProperty("/newCustomer/Star",false);this.getView().getModel("local").setProperty("/newCustomer/Defaulter",false);this.getView().getModel("local").setProperty("/newCustomer/HighServerUsage",false);sap.ui.getCore().byId("idSkills").clearSelection();this.oSuppPopup.open()},passwords:"",onBank:function(e){this.oEvent_approve=e;var t=e.getSource().getBindingContext().sPath;var s=this;var i=s.oEvent_approve.getSource().getBindingContext().getModel().getProperty(s.oEvent_approve.getSource().getBindingContext().getPath());if(i.AccountName){this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/Accounts","GET",{filters:[new sap.ui.model.Filter("accountNo","EQ",i.AccountName)]},{},this).then(function(e){console.log(e.results[0].userId);console.log(e.results[0].key);try{debugger;s.copyToClipboard(e.results[0].userId,e.results[0].extra1)}catch(e){}finally{}}).catch(function(e){s.getView().setBusy(false);var t=s.getErrorMessage(e)})}},onSelect:function(e){this.sId=e.getSource().getId();var t="",s="";if(this.sId.indexOf("customerId")!==-1){this.getCustomerPopup();var i=this.getView().getModel("i18n").getProperty("customer");this.searchPopup.setTitle(i);this.searchPopup.bindAggregation("items",{path:"/Students",template:new sap.m.DisplayListItem({label:"{Name} {=${Defaulter} ? '(Defaulter)' : ''}",value:"{GmailId}"})})}else if(this.sId.indexOf("idEmailCust")!==-1){this.getCustomerPopup();var i=this.getView().getModel("i18n").getProperty("customer");this.searchPopup.setTitle(i);this.searchPopup.bindAggregation("items",{path:"/Inquries",template:new sap.m.DisplayListItem({label:"{EmailId}",value:"{FirstName}"})})}else if(this.sId.indexOf("courseId")!==-1){var a=new sap.ui.model.Filter("hidden",o.EQ,false);this.getCustomerPopup();var i=this.getView().getModel("i18n").getProperty("batch");this.searchPopup.setTitle(i);this.searchPopup.bindAggregation("items",{path:"/Courses",filters:[a],sorter:{path:"EndDate",descending:false,group:false},template:new sap.m.ObjectListItem({title:"{Name}",intro:"{BatchNo}",number:{path:"status",formatter:this.formatter.formatStatusValue}})});var r=this.searchPopup.getBinding("items");var l=[];var n="EndDate";var u=true;l.push(new sap.ui.model.Sorter(n,u));r.sort(l)}else if(this.sId.indexOf("accountDetails")!==-1){var d=new sap.ui.model.Filter("deleted",o.EQ,false);t="Account Search";s="local>/accountSet";this.getCustomerPopup();var i="Account Search";var g=new sap.ui.model.Sorter({path:"value",descending:false});this.searchPopup.setTitle(i);this.searchPopup.bindAggregation("items",{path:"local>/accountSet",filters:[d],sorter:g,template:new sap.m.DisplayListItem({label:"{local>value}",value:"{local>key}"})})}},onConfirm:function(e){if(this.sId.indexOf("accountDetails")!==-1){var t=e.getParameter("selectedItem").getValue();this.getView().getModel("local").setProperty("/dumpSold/account",t)}else if(this.sId.indexOf("customerId")!==-1){var s=this.getSelectedKey(e);this.isDefaulter=s[1].endsWith("(Defaulter)");this.customerId=s[2];var i=e.getParameter("selectedItem").getBindingContext().getObject();this.getView().getModel("local").setProperty("/dumpSold/EmailId",i.GmailId);this.getView().getModel("local").setProperty("/dumpSold/FirstName",i.Name.split(" ")[0]);this.getView().getModel("local").setProperty("/dumpSold/LastName",i.Name.split(" ").length>0?i.Name.split(" ")[1]:null);this.getView().getModel("local").setProperty("/dumpSold/Country",i.Country);this.getView().getModel("local").setProperty("/dumpSold/Phone",i.ContactNo)}else if(this.sId.indexOf("courseId")!==-1){var s=this.getObjListSelectedkey(e);this.getView().byId("idCourseName").setText(s[0]);this.getView().byId("courseId").setValue(s[1]);this.courseId=s[3];var a=e.getParameter("selectedItem");var r=a.getBindingContext();if(r.getObject().Fee){this.getView().byId("idAmount").setValue(r.getObject().Fee);CourseFee=r.getObject().Fee}else{CourseFee=0}var o=new Date(r.getObject().DemoStartDate);o.setMonth(o.getMonth()+1);if(o>new Date){this.getView().byId("idPayDueDate").setDateValue(o)}}else if(this.sId.indexOf("idEmailCust")!==-1){var a=e.getParameter("selectedItem");var r=a.getBindingContext();sap.ui.getCore().byId("idSkills").clearSelection();sap.ui.getCore().byId("idPhone").setValue(0);sap.ui.getCore().byId("idCountry").setSelectedKey("IN");sap.ui.getCore().byId("idOtherEmail1").setValue(null);sap.ui.getCore().byId("idOtherEmail2").setValue(null);sap.ui.getCore().byId("idStar").setSelected(false);sap.ui.getCore().byId("idName").setValue(null);sap.ui.getCore().byId("idDefaulter").setSelected(false);sap.ui.getCore().byId("idHighServerUsage").setSelected(false);if(r){var l=this;var n={};var u=new sap.ui.model.Filter("GmailId","EQ",r.getObject().EmailId);this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/Students","GET",{filters:[u]},n,this).then(function(e){if(e.results.length!=0){sap.ui.getCore().byId("idEmailCust").setValue(e.results[0].GmailId);sap.ui.getCore().byId("idName").setValue(e.results[0].Name);if(e.results[0].ContactNo){sap.ui.getCore().byId("idPhone").setValue(e.results[0].ContactNo)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(e.results[0].Country){sap.ui.getCore().byId("idCountry").setSelectedKey(e.results[0].Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}if(e.results[0].OtherEmail1){sap.ui.getCore().byId("idOtherEmail1").setValue(e.results[0].OtherEmail1)}if(e.results[0].OtherEmail2){sap.ui.getCore().byId("idOtherEmail2").setValue(e.results[0].OtherEmail2)}if(e.results[0].Defaulter){sap.ui.getCore().byId("idDefaulter").setSelected(e.results[0].Defaulter)}if(e.results[0].HighServerUsage){sap.ui.getCore().byId("idHighServerUsage").setSelected(e.results[0].HighServerUsage)}if(e.results[0].Star){sap.ui.getCore().byId("idStar").setSelected(e.results[0].Star)}sap.ui.getCore().byId("createNew").setText("Update");l.UpdateCustomer=true;l.customerGUID=e.results[0].id}else{var t;var s;sap.ui.getCore().byId("idEmailCust").setValue(r.getObject().EmailId);if(r.getObject().FirstName){if(r.getObject().LastName){t=r.getObject().LastName}else{t=" "}sap.ui.getCore().byId("idName").setValue(r.getObject().FirstName+" "+t)}else{s="";if(r.getObject().LastName){t=r.getObject().LastName}else{t=""}sap.ui.getCore().byId("idName").setValue(s+" "+t)}if(r.getObject().Phone){sap.ui.getCore().byId("idPhone").setValue(r.getObject().Phone)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(r.getObject().Country){sap.ui.getCore().byId("idCountry").setSelectedKey(r.getObject().Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}sap.ui.getCore().byId("createNew").setText("Create");l.UpdateCustomer=false}}).catch(function(e){var t;var s;sap.ui.getCore().byId("idEmailCust").setValue(r.getObject().EmailId);if(r.getObject().FirstName){if(r.getObject().LastName){t=r.getObject().LastName}else{t=" "}sap.ui.getCore().byId("idName").setValue(r.getObject().FirstName+" "+t)}else{s="";if(r.getObject().LastName){t=r.getObject().LastName}else{t=""}sap.ui.getCore().byId("idName").setValue(s+" "+t)}if(r.getObject().Phone){sap.ui.getCore().byId("idPhone").setValue(r.getObject().Phone)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(r.getObject().Country){sap.ui.getCore().byId("idCountry").setSelectedKey(r.getObject().Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}sap.ui.getCore().byId("createNew").setText("Create");l.UpdateCustomer=false})}}},suggestionItemSelected:function(e){var t=e.getParameter("selectedItem");var s=t.getBindingContext();sap.ui.getCore().byId("idSkills").clearSelection();sap.ui.getCore().byId("idPhone").setValue(0);sap.ui.getCore().byId("idCountry").setSelectedKey("IN");sap.ui.getCore().byId("idOtherEmail1").setValue(null);sap.ui.getCore().byId("idOtherEmail2").setValue(null);sap.ui.getCore().byId("idStar").setSelected(false);sap.ui.getCore().byId("idName").setValue(null);sap.ui.getCore().byId("idDefaulter").setSelected(false);sap.ui.getCore().byId("idHighServerUsage").setSelected(false);if(s){var i=this;var a={};var r=new sap.ui.model.Filter("GmailId","EQ",s.getObject().EmailId);this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/Students","GET",{filters:[r]},a,this).then(function(e){if(e.results.length!=0){sap.ui.getCore().byId("idEmailCust").setValue(e.results[0].GmailId);sap.ui.getCore().byId("idName").setValue(e.results[0].Name);if(e.results[0].ContactNo){sap.ui.getCore().byId("idPhone").setValue(e.results[0].ContactNo)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(e.results[0].Country){sap.ui.getCore().byId("idCountry").setSelectedKey(e.results[0].Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}if(e.results[0].OtherEmail1){sap.ui.getCore().byId("idOtherEmail1").setValue(e.results[0].OtherEmail1)}if(e.results[0].OtherEmail2){sap.ui.getCore().byId("idOtherEmail2").setValue(e.results[0].OtherEmail2)}if(e.results[0].Defaulter){sap.ui.getCore().byId("idDefaulter").setSelected(e.results[0].Defaulter)}if(e.results[0].HighServerUsage){sap.ui.getCore().byId("idHighServerUsage").setSelected(e.results[0].HighServerUsage)}if(e.results[0].Star){sap.ui.getCore().byId("idStar").setSelected(e.results[0].Star)}sap.ui.getCore().byId("createNew").setText("Update");i.UpdateCustomer=true;i.customerGUID=e.results[0].id}else{var t;var a;sap.ui.getCore().byId("idEmailCust").setValue(s.getObject().EmailId);if(s.getObject().FirstName){if(s.getObject().LastName){t=s.getObject().LastName}else{t=" "}sap.ui.getCore().byId("idName").setValue(s.getObject().FirstName+" "+t)}else{a="";if(s.getObject().LastName){t=s.getObject().LastName}else{t=""}sap.ui.getCore().byId("idName").setValue(a+" "+t)}if(s.getObject().Phone){sap.ui.getCore().byId("idPhone").setValue(s.getObject().Phone)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(s.getObject().Country){sap.ui.getCore().byId("idCountry").setSelectedKey(s.getObject().Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}sap.ui.getCore().byId("createNew").setText("Create");i.UpdateCustomer=false}}).catch(function(e){var t;var a;sap.ui.getCore().byId("idEmailCust").setValue(s.getObject().EmailId);if(s.getObject().FirstName){if(s.getObject().LastName){t=s.getObject().LastName}else{t=" "}sap.ui.getCore().byId("idName").setValue(s.getObject().FirstName+" "+t)}else{a="";if(s.getObject().LastName){t=s.getObject().LastName}else{t=""}sap.ui.getCore().byId("idName").setValue(a+" "+t)}if(s.getObject().Phone){sap.ui.getCore().byId("idPhone").setValue(s.getObject().Phone)}else{sap.ui.getCore().byId("idPhone").setValue(0)}if(s.getObject().Country){sap.ui.getCore().byId("idCountry").setSelectedKey(s.getObject().Country)}else{sap.ui.getCore().byId("idCountry").setSelectedKey("IN")}sap.ui.getCore().byId("createNew").setText("Create");i.UpdateCustomer=false})}},onAmountChange:function(e){var t=parseInt(e.getParameter("value"));if(t<CourseFee){var s=CourseFee-t;this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",s);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",true)}else{this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",0);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",false)}},onWaiver:function(e){var t=e.getParameter("selected");if(t===true){this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",0);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",false)}else{var s=this.getView().getModel("local").getProperty("/newRegistration/Amount");if(s<CourseFee){var i=CourseFee-s;this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",i);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",true)}else{this.getView().getModel("local").setProperty("/newRegistration/PendingAmount",0);this.getView().getModel("local").setProperty("/newRegistration/PartialPayment",false)}}},onSearch:function(e){if(this.sId.indexOf("customerId")!==-1){var t=this.getQuery(e);if(t){var s=new sap.ui.model.Filter("Name",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("GmailId",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"/Students",template:new sap.m.DisplayListItem({label:"{Name}",value:"{GmailId}"})});this.searchPopup.getBinding("items").filter([])}}else if(this.sId.indexOf("courseId")!==-1){var t=this.getQuery(e);if(t){var s=new sap.ui.model.Filter("Name",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("BatchNo",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"/Courses",template:new sap.m.DisplayListItem({label:"{Name}",value:"{BatchNo}"})});this.searchPopup.getBinding("items").filter([])}}},onCancel:function(e){this.searchPopup.close()},onClose:function(){this.oSuppPopup.close()},onLiveSearch:function(e){var t=e.getParameter("query");if(!t){t=e.getParameter("value")}if(this.sId.indexOf("customerId")!==-1){if(t){var s=new sap.ui.model.Filter("Name",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("GmailId",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"/Students",template:new sap.m.DisplayListItem({label:"{Name}",value:"{GmailId}"})});this.searchPopup.getBinding("items").filter([])}}else if(this.sId.indexOf("courseId")!==-1){if(t){var s=new sap.ui.model.Filter("Name",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("BatchNo",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"/Courses",template:new sap.m.DisplayListItem({label:"{Name}",value:"{BatchNo}"})});this.searchPopup.getBinding("items").filter([])}}else if(this.sId.indexOf("accountDetails")!==-1){if(t){var s=new sap.ui.model.Filter("value",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("key",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"local>/accountSet",template:new sap.m.DisplayListItem({label:"{local>value}",value:"{local>key}"})});this.searchPopup.getBinding("items").filter([])}}else if(this.sId.indexOf("idEmailCust")!==-1){if(t){var s=new sap.ui.model.Filter("EmailId",sap.ui.model.FilterOperator.Contains,t);var i=new sap.ui.model.Filter("FirstName",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter({filters:[s,i],and:false});var r=[a];this.searchPopup.getBinding("items").filter(r)}else{this.searchPopup.bindAggregation("items",{path:"/Inquries",template:new sap.m.DisplayListItem({label:"{EmailId}",value:"{FirstName}"})});this.searchPopup.getBinding("items").filter([])}}},onClearScreen:function(e){this.getView().getModel("local").setProperty("/dumpSold",{EmailId:null,DumpCode:null,FirstName:null,LastName:null,Date:null,Country:null,Phone:0,CreatedOn:null,CreatedBy:null,ChangedOn:null,ChangedBy:null,fees:null,currency:null,account:null,source:null})},onCreateDump:function(){if(!this.createDumpPopup){this.createDumpPopup=new sap.ui.xmlfragment("oft.fiori.fragments.CreateDump",this);this.getView().addDependent(this.createDumpPopup);this.createDumpPopup.setTitle("Create Dump")}this.createDumpPopup.open()},onCloseDump:function(){this.createDumpPopup.close()},onSave:function(){var e=this.getView().getModel("local").getProperty("/template");this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/Templates","POST",{},e,this).then(function(e){that.getView().setBusy(false);sap.m.MessageToast.show("Entry Saved successfully");that.destroyMessagePopover();if(that.getView().byId("idRecent").getBinding("items")){that.getView().byId("idRecent").getBinding("items").refresh()}}).catch(function(e){that.getView().setBusy(false);sap.m.MessageToast.show("template Saving failed "+e.responseText)})}})});